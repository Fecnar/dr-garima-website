---
const title = "Article Manager - Dr. Garima";
---

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    .admin-nav {
      background: rgba(255,255,255,0.9);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .admin-nav a {
      color: #6f42c1;
      text-decoration: none;
      margin-right: 1.5rem;
      padding: 0.5rem 1rem;
      border-radius: 4px;
    }
    .logout-btn {
      float: right;
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .admin-hero {
      text-align: center;
      background: rgba(255,255,255,0.9);
      padding: 3rem 2rem;
      border-radius: 15px;
      margin-bottom: 3rem;
    }
    .admin-section {
      background: rgba(255,255,255,0.9);
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
    }
    .form-group {
      margin-bottom: 1.5rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: #6f42c1;
    }
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.8rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
    }
    .form-group input:focus,
    .form-group textarea:focus {
      border-color: #6f42c1;
      outline: none;
    }
    .btn {
      background: #6f42c1;
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin-right: 1rem;
    }
    .btn-success {
      background: #1db954;
    }
    .btn-danger {
      background: #ff6b6b;
    }
    .article-list {
      display: grid;
      gap: 1rem;
    }
    .article-item {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 8px;
      border-left: 4px solid #6f42c1;
    }
    .access-denied {
      text-align: center;
      padding: 4rem 2rem;
      background: rgba(255,255,255,0.9);
      border-radius: 15px;
    }
  </style>
</head>
<body>
  <div id="admin-content" style="display: none;">
    <div class="container">
      <!-- Admin Navigation -->
      <div class="admin-nav">
        <a href="/home">üéÇ Personal Home</a>
        <a href="/admin/articles">üìö Article Manager</a>
        <span style="color: #1db954; font-weight: bold;">üë©‚Äç‚öïÔ∏è Dr. Garima's Admin</span>
        <button onclick="logout()" class="logout-btn">Logout</button>
        <div style="clear: both;"></div>
      </div>

      <!-- Admin Hero -->
      <div class="admin-hero">
        <h1>üìö Article Management System</h1>
        <p>Manage your published articles and research papers</p>
        <p style="color: #1db954; font-weight: bold;">‚úÖ Dr. Garima - Authenticated</p>
      </div>

      <!-- Add New Article Section -->
      <div class="admin-section">
        <h2>‚ûï Add New Article</h2>
        <form id="article-form">
          <div class="form-group">
            <label for="article-title">Article Title</label>
            <input type="text" id="article-title" required placeholder="Enter article title">
          </div>
          <div class="form-group">
            <label for="article-category">Category</label>
            <select id="article-category" required>
              <option value="">Select Category</option>
              <option value="Orthopedic">Orthopedic Physiotherapy</option>
              <option value="Sports Medicine">Sports Medicine</option>
              <option value="Neurological">Neurological Rehabilitation</option>
              <option value="Prevention">Injury Prevention</option>
              <option value="Research">Clinical Research</option>
            </select>
          </div>
          <div class="form-group">
            <label for="article-summary">Summary</label>
            <textarea id="article-summary" rows="3" required placeholder="Brief summary of the article"></textarea>
          </div>
          <div class="form-group">
            <label for="article-link">Article Link/URL</label>
            <input type="url" id="article-link" required placeholder="https://journal.com/your-article">
          </div>
          <div class="form-group">
            <label for="article-date">Publication Date</label>
            <input type="date" id="article-date" required>
          </div>
          <button type="submit" class="btn btn-success">üìù Add Article</button>
          <button type="reset" class="btn">üîÑ Clear Form</button>
        </form>
      </div>

      <!-- Current Articles Section -->
      <div class="admin-section">
        <h2>üìã Current Articles</h2>
        <div id="articles-list" class="article-list">
          <!-- Articles will be loaded here -->
        </div>
      </div>
    </div>
  </div>

  <div id="access-denied" class="access-denied">
    <h2>üö´ Admin Access Restricted</h2>
    <p>This admin panel is only for Dr. Garima. Please sign in with the authorized account.</p>
    <button onclick="redirectToHome()" style="background: #6f42c1; color: white; border: none; padding: 1rem 2rem; border-radius: 8px; cursor: pointer;">
      Go to Home
    </button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const currentUser = localStorage.getItem('userEmail');
      
      // Only Dr. Garima can access this admin panel
      if (currentUser === 'websitefordr.garima@gmail.com') {
        document.getElementById('admin-content').style.display = 'block';
        document.getElementById('access-denied').style.display = 'none';
        
        loadArticles();
        setupArticleForm();
      } else {
        document.getElementById('admin-content').style.display = 'none';
        document.getElementById('access-denied').style.display = 'block';
      }
      
      function setupArticleForm() {
        document.getElementById('article-form').addEventListener('submit', function(e) {
          e.preventDefault();
          
          const article = {
            title: document.getElementById('article-title').value,
            category: document.getElementById('article-category').value,
            summary: document.getElementById('article-summary').value,
            link: document.getElementById('article-link').value,
            date: document.getElementById('article-date').value,
            id: Date.now()
          };
          
          saveArticle(article);
          document.getElementById('article-form').reset();
          loadArticles();
          
          alert('‚úÖ Article added successfully!');
        });
      }
      
      function saveArticle(article) {
        let articles = JSON.parse(localStorage.getItem('dr-garima-articles') || '[]');
        articles.push(article);
        localStorage.setItem('dr-garima-articles', JSON.stringify(articles));
      }
      
      function loadArticles() {
        const articles = JSON.parse(localStorage.getItem('dr-garima-articles') || '[]');
        const container = document.getElementById('articles-list');
        
        if (articles.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: #666;">No articles yet. Add your first article above!</p>';
          return;
        }
        
        container.innerHTML = articles.map(article => `
          <div class="article-item">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div style="flex: 1;">
                <h4 style="margin: 0 0 0.5rem 0; color: #6f42c1;">${article.title}</h4>
                <div style="background: #6f42c1; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; display: inline-block; margin-bottom: 0.5rem;">
                  ${article.category}
                </div>
                <p style="margin: 0.5rem 0; color: #555;">${article.summary}</p>
                <div style="font-size: 0.9rem; color: #666;">
                  üìÖ ${article.date} | üîó <a href="${article.link}" target="_blank" style="color: #6f42c1;">View Article</a>
                </div>
              </div>
              <button onclick="deleteArticle(${article.id})" class="btn btn-danger" style="margin-left: 1rem;">üóëÔ∏è Delete</button>
            </div>
          </div>
        `).join('');
      }
      
      window.deleteArticle = function(id) {
        if (confirm('Are you sure you want to delete this article?')) {
          let articles = JSON.parse(localStorage.getItem('dr-garima-articles') || '[]');
          articles = articles.filter(article => article.id !== id);
          localStorage.setItem('dr-garima-articles', JSON.stringify(articles));
          loadArticles();
          alert('üóëÔ∏è Article deleted successfully!');
        }
      }
      
      window.logout = function() {
        localStorage.removeItem('userEmail');
        window.location.href = '/';
      }
      
      window.redirectToHome = function() {
        window.location.href = '/';
      }
    });
  </script>
</body>
</html>
